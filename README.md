# ブループロトコル：スターレゾナンス  
## 鍛造 利益期待値計算ツール
本ツールは、  
**「ブループロトコル：スターレゾナンス」** におけるクラフト要素  
**鍛造（鉱石 → 鍛造品）** について、

> どの鉱石を購入し、鍛造品を作成・販売すれば  
> 期待値ベースで最も利益が高くなるか

を **簡単に可視化・比較するための Web ツール** です。

GitHub Pages 上で動作し、インストール不要で利用できます。

---

## 🔍 このツールで分かること
- 鉱石価格の差による **最適な購入先（青 or 紫）**
- マーケット手数料を考慮した **正確な利益計算**
- 「1回制作＝1個ではない」  
  **生成個数の期待値を考慮した実際の儲け**
- マンスリーカード特典の **有無による利益差**
- 単発制作時の確定利益と、長期的な期待利益の違い

---

## 📈 計算ロジックの概要
### 1. 生成個数の期待値
鍛造では、1回の制作で複数個生成される可能性があります。
本ツールでは、実測・検証結果に基づき以下の期待値を使用しています。

| 鉱石種別 | 期待生成個数 |
|--------|------------|
| 紫鉱石 | 1.753 |
| 青鉱石 | 1.55 |

---

### 2. 手数料計算
マーケット手数料は **固定値ではなく販売価格に依存** します。
- 基本手数料率  
  `166 / 3307 ≒ 5.02%`
- 小数点以下は **切り上げ**
- マンスリーカード有効時  
  - 切り上げ後の手数料から **20% 割引**
  - 再度切り上げ

---

### 3. 利益計算式
#### 期待値ベースの利益
`(販売価格 − 手数料) × 期待生成個数 − (鉱石価格 × 8)`
#### 単品確定利益（参考）
`(販売価格 − 手数料) − (鉱石価格 × 8)`
> ⚠️ 注意
> 表示される「利益期待値」は
> **同じ条件で何度も制作を繰り返した場合の平均値**です。
> 毎回この金額が得られることを保証するものではありません。

---

## 🖥️使い方
取引所を参考に
1. 鍛造品の販売価格を選択(謎の金属, 輝光石, 精錬石)
2. 青鉱石・紫鉱石の価格を入力(謎の金属ならブルーリッチ鉱石とブルー高純度鉱石)
3. 必要に応じて「マンスリーカード特典」を有効化
4. 推奨される鉱石と利益期待値を確認

---

## 🌐公開ページ
**GitHub Pages**
[BPSR forging calc](https://saica1101.github.io/BPSR_forging_calc/)

---

## ⚠️免責事項
- 本ツールは**非公式**です
- ゲーム内の仕様変更やマーケット状況により結果が実態と乖離する可能性があります
- 最終的な判断は自己責任でお願いします

---

## 🛠技術スタック
- React
- TypeScript
- Tailwind CSS (+ DaisyUI)
- GitHub Pages

---

## 📄ライセンス
本プロジェクトは**GNU General Public License v3.0 (GPL-3.0)**のもとで公開されています。
- 本ソフトウェアは改変・再配布可能です
- ただし、改変した場合は **必ずソースコードを公開**してください
- また、**本リポジトリをフォーク元として明示**する必要があります

詳細は[LICENSE](https://github.com/saica1101/BPSR_forging_calc/blob/main/LICENSE)ファイルを参照してください。
